<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Artists | Ninart Vision</title>

  <link rel="stylesheet" href="../style.css" />
  <link rel="icon" href="../images/favicon.png">
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="container header-row">

    <!-- Logo -->
    <a class="brand" href="../index.html">
      <img src="../images/logo.png" alt="Ninart Vision Logo">
    </a>

    <!-- Desktop menu -->
    <nav class="nav desktop-nav">
      <a href="../index.html">Home</a>
      <a href="../support.html">Support a Project</a>
      <a href="../sale/shop.html">Shop</a>
      <a href="./" class="active">Artists</a>
      <a href="../news.html">News</a>
      <a href="../about.html">About</a>
    </nav>

    <!-- Mobile hamburger -->
    <button class="hamburger" id="openMenu" aria-label="Open menu">
      <span></span><span></span><span></span>
    </button>

  </div>
</header>

<!-- Mobile menu overlay -->
<div class="menu-overlay" id="menuOverlay">
  <button class="menu-close" id="closeMenu" aria-label="Close menu">âœ•</button>

  <nav class="menu-links">
    <a href="../index.html" class="menu-link">HOME</a>
    <a href="../support.html" class="menu-link">SUPPORT A PROJECT</a>
    <a href="../sale/shop.html" class="menu-link">SHOP</a>
    <a href="./" class="menu-link">ARTISTS</a>
    <a href="../news.html" class="menu-link">NEWS</a>
    <a href="../about.html" class="menu-link">ABOUT</a>
  </nav>
</div>

<div class="artists-header">
  <h2>Artists</h2>
  <div class="artists-art"></div>
</div>


<div class="artists-grid" id="artistsGrid"></div>

<!-- SCRIPTS -->
<script src="../script.js"></script>
<script src="../sanity-client.js"></script>

<script>
  const grid = document.getElementById("artistsGrid");

  // Show loading state
  grid.innerHTML = "<p style='text-align:center'>Loading artists...</p>";

  // Fetch all artists from Sanity
  (async function() {
    try {
      const artists = await fetchArtistsFromSanity(); // Fetch all artists without limit

      if (!artists || artists.length === 0) {
        grid.innerHTML = "<p style='text-align:center'>No artists available.</p>";
        return;
      }

      // Render all artists from Sanity
      grid.innerHTML = artists.map(artist => {
        // Map slugs to existing HTML filenames
        const artistSlug = artist.slug?.current || artist.slug || artist._id;
        const slugToFile = {
          'nini-mzhavia': 'nini.html',
          'mzia-kashia': 'mzia.html',
          'nanuli-gogiberidze': 'nanuli.html',
          'salome-mzhavia': 'salome.html'
        };
        const artistPage = slugToFile[artistSlug] || `${artistSlug}.html`;

        return `
          <a class="artist-card" href="${artistPage}">
            <div class="artist-avatar"
                 style="background-image:url('${artist.avatar || '../images/artists/placeholder.jpg'}')">
            </div>

            <h3 class="artist-name">
              <img src="../images/icon.jpg" alt="Georgia" class="flag-icon">
              <span>${artist.name}</span>
            </h3>

            <p class="artist-style">${artist.style || ''}</p>
          </a>
        `;
      }).join("");

    } catch (error) {
      console.error('Error loading artists:', error);
      grid.innerHTML = "<p style='text-align:center'>Unable to load artists. Please try again later.</p>";
    }
  })();
</script>


</body>
</html>
